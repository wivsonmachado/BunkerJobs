<!DOCTYPE html>
<html>
<head>
<title> Bunker Operation </title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"  crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@500&display=swap"  rel="stylesheet">
</head>


<body>

    <a href="/form"><button class="btn btn-dark">Adicionar
        operação</button></a>

<table class="table table-light" style="font-size: 14px;">
		<tr class="table-dark">
            <th></th>
            <th scope="col">Data</th>
            <th scope="col">Navio</th>
            <th scope="col">CFN</th>
            <th scope="col">Fornecido Por</th>
            <th scope="col">Fornecedor</th>
            <th scope="col">Recebido</th>
            <th scope="col">Fornecido</th>
            <th scope="col">Diferença</th>
            <th scope="col">Porcentagem</th>
            <th scope="col">Localidade</th>
            <th scope="col">Cliente</th>
            <th scope="col">Início Operação</th>
            <th scope="col">Fim Operação</th>
            <th scope="col"></th>
        </tr>
        
        <tr th:each="op : ${listOperations}">
            <th scope="row"></th>
            <td><span th:text="${#dates.format(op.dataOperacao, 'dd/MM/yyyy')}"></span></td>
            <td><span th:text="${op.navio}"></span></td>
            <td><span th:text="${op.cfn}"></span></td>
            <td><span th:text="${op.fornecidoPor}"></span></td>
            <td><span th:text="${op.fornecedor}"></span></td>
            <td><span th:text="${#numbers.formatDecimal(op.recebido,3, 'POINT', 0, 'COMMA')}"></span></td>
            <td><span th:text="${#numbers.formatDecimal(op.fornecido,3, 'POINT', 0, 'COMMA')}"></span></td>
            <td><span th:text="${#numbers.formatDecimal(op.diferenca,3, 'POINT', 0, 'COMMA')}"></span></td>
            <th:block th:with="percent=${op.recebido} == 0 ? 0 : (${op.recebido - op.fornecido} / ${op.recebido})">
            <td><span th:text="${#numbers.formatPercent(percent, 1, 2)}"></span></td>
            </th:block>
            <td><span th:text="${op.localidade}"></span></td>
            <td><span th:text="${op.cliente}"></span></td>
            <td><span th:text="${#dates.format(op.inicio, 'dd/MM/yyyy HH:mm')}"></span></td>
            <td><span th:text="${#dates.format(op.fim, 'dd/MM/yyyy HH:mm')}"></span></td>
            <td class="buttons "><a th:href="@{form/{id}(id=${op.id})}"
                                    th:method="get" class="btn btn-warning"><i class="fa fa-pencil"></i></a>
                <a th:href="@{delete/{id}(id=${op.id})}" th:method="delete"
                   class="btn btn-danger"><i class="fa fa-trash"></i></a></td>
        </tr>
    </table>
    
    <div th:if = "${totalPages > 1}" class="h-100 d-flex align-items-center justify-content-center">
    	<div>
    		<div>
    			Total de linhas: [[${totalItems}]]
    		</div>
	    		<nav>
		    		<ul class="pagination">
		    			<li class="page-item"><a class="page-link" th:if = "${currentPage > 1 }" th:href ="@{'/page/' + ${currentPage - 1}}">Página Anterior</a></li>
		    			<li class="page-item page-link disable" th:unless="${currentPage > 1}">Página Anterior</li>
		    			<span th:each="i: ${#numbers.sequence(1, totalPages)}">
		    				<li class="page-item"><a class="page-link" th:if="${currentPage != i}" th:href="@{'/page/' + ${i}}">[[${i}]]</a></li> 
		    				<li class="page-item page-link disable" th:unless="${currentPage != i}">[[${i}]]</li>&nbsp; &nbsp;
		    			</span>
		    			<li class="page-item"><a class="page-link" th:if = "${currentPage < totalPages }" th:href ="@{'/page/' + ${currentPage + 1}}">Próxima Página</a></li>
		    			<li class="page-item page-link disable" th:unless="${currentPage < totalPages}">Próxima Página</li>
		    			<li class="page-item"><a class="page-link" th:if = "${currentPage < totalPages }" th:href ="@{'/page/' + ${totalPages}}">Última Página</a></li>
		    			<li class="page-item page-link disable" th:unless="${currentPage < totalPages}">Última Página</li>
		    		</ul>
	    		</nav>
    	</div>    
    </div>

</body>
</html>